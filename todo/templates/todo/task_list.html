{% extends "todo/two_columns.html" %}

{% block left_column %}
<h6>Список задач:</h6>
<ul>
{% for task in actual_tasks %}
    {% with task_status=task.actual_status before_deadline=task.remaining_days after_deadline=task.days_quantity_after_deadline %}
    <li
        {% if task_status == task.DONE_STATUS %}
            class="done"
        {% endif %}

        {% if task_status == task.STOP_STATUS %}
            class="stop"
        {% endif %}
    >
        <a href="{{ task.get_absolute_url }}">{{ task.task }}</a><br/>

        {% if task_status == task.WAIT_STATUS %}
            {% with days_to_start=task.days_to_start %}
            <small>
            {% if days_to_start == 0 %}
                начнется <b class="tasknorm">завтра</b>
            {% else %}
                начнется через <b class="tasknorm">{{ days_to_start }}</b>
            {% endif %}
            </small>
            {% endwith %}
        {% endif %}

        {% if task_status == task.WORK_STATUS %}
            {% if task.be_in_time %}
                <small>
                {% if before_deadline == 0 %}
                    <b class="taskgood">сегодня последний день</b>
                {% else %}
                    осталось <b class="taskgood">{{ before_deadline }}</b>
                {% endif %}
                </small>
            {% else %}
                <small><b class="taskbad">просрочено на {{ after_deadline }}</b></small>
            {% endif %}
        {% endif %}
    </li>
    {% endwith %}
{% endfor %}
</ul>
{% endblock %}
